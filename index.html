<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ¸å•†è´¹ç‡å¯¹æ¯”è®¡ç®—å™¨</title>
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- é…ç½®Tailwindï¼ˆå¯é€‰ï¼Œæ ¹æ®éœ€è¦è°ƒæ•´ï¼‰ -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'broker-primary': '#2D6FF7',   // ä¸»è‰²ï¼ˆåˆ¸å•†è“ï¼‰
                        'broker-yellow': '#ffe100',   // è€è™é»„
                        'broker-orange': '#FF6900',      // å¯Œé€”æ©™
                        'broker-green': '#37a0ff',     // é•¿æ¡¥è“
                        // æš—è‰²æ¨¡å¼é¢œè‰²
                        'dark-bg': '#1a1a1a',
                        'dark-card': '#2d2d2d',
                        'dark-text': '#e5e5e5',
                        'dark-text-secondary': '#a3a3a3'
                    }
                }
            }
        }
    </script>
    <!-- ä¿ç•™Interå­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 dark:bg-dark-bg min-h-screen p-4 sm:p-8 font-inter transition-colors duration-200">
    <div class="container max-w-6xl mx-auto">
        <!-- Header with Title and Controls -->
        <div class="flex justify-between items-center mb-6">
            <h1 id="pageTitle" class="text-xl sm:text-2xl font-bold text-gray-800 dark:text-dark-text transition-colors duration-300 truncate mr-4"></h1>
            <div class="flex items-center space-x-4 flex-shrink-0">
                <!-- æš—è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’® -->
                <button id="themeSwitch" class="flex items-center gap-2 text-sm text-gray-600 dark:text-dark-text-secondary hover:text-gray-900 dark:hover:text-dark-text transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                    <span>æš—è‰²æ¨¡å¼</span>
                </button>
                <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
                <button id="langSwitch" class="flex items-center gap-2 text-sm text-gray-600 dark:text-dark-text-secondary hover:text-gray-900 dark:hover:text-dark-text transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
                    </svg>
                    <span>English</span>
                </button>
            </div>
        </div>

        <div class="bg-white dark:bg-dark-card rounded-2xl p-4 sm:p-8 shadow-sm">
            <!-- Tab ç»„ä»¶ -->
            <div class="w-full mb-8">
                <div id="marketTab" class="flex bg-gray-100 dark:bg-dark-bg rounded-full p-1 gap-2 w-full">
                    <button id="tab-hk" type="button" class="flex-1 flex items-center justify-center gap-2 px-6 h-12 rounded-full font-medium text-base focus:outline-none transition bg-white dark:bg-dark-card shadow text-black dark:text-dark-text">
                        <img src="public/hk.svg" alt="æ¸¯è‚¡" class="w-5 h-5" />
                        <span>æ¸¯è‚¡</span>
                    </button>
                    <button id="tab-us" type="button" class="flex-1 flex items-center justify-center gap-2 px-6 h-12 rounded-full font-medium text-base focus:outline-none transition text-gray-500 dark:text-dark-text-secondary bg-transparent">
                        <img src="public/us.svg" alt="ç¾è‚¡" class="w-5 h-5" />
                        <span>ç¾è‚¡</span>
                    </button>
                </div>
            </div>

            <!-- æ¸¯è‚¡å†…å®¹åŒºåŸŸ -->
            <div id="hk-content">
                <!-- é€šç”¨è¾“å…¥ï¼ˆä¿®æ”¹åï¼‰ -->
                <div class="flex flex-col lg:flex-row gap-4 mb-4">
                    <div class="w-full lg:w-1/2">
                        <label id="transactionValueLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">è¾“å…¥äº¤æ˜“å€¼ï¼ˆæ¸¯å…ƒï¼‰</label>
                        <input type="number" id="transactionValue" step="0.01" 
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition"
                            placeholder="è¯·è¾“å…¥äº¤æ˜“é‡‘é¢" value="10000">
                    </div>
                    <div class="w-full lg:w-1/2">
                        <label id="orderCountLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">æ¯æœˆäº¤æ˜“ç¬”æ•°</label>
                        <input type="number" id="orderCount" min="1" value="10"
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition"
                            placeholder="è¯·è¾“å…¥æ¯æœˆäº¤æ˜“ç¬”æ•°">
                    </div>
                </div>

                <!-- ç»Ÿä¸€å¹³å°è´¹æ¨¡å¼é€‰æ‹© -->
                <div class="w-full mb-6">
                    <label id="platformModeLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">å¹³å°è´¹æ¨¡å¼</label>
                    <div class="relative">
                        <select id="platformModeSelect" 
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 appearance-none bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition">
                            <option value="fixed">å›ºå®šå¼</option>
                            <option value="stepped">é˜¶æ¢¯å¼</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4 text-gray-700 dark:text-dark-text-secondary">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <button onclick="calculateFees()" 
                    class="w-full bg-broker-primary text-white px-4 h-12 rounded-full font-medium 
                    hover:bg-broker-primary/90 transition-shadow hover:shadow-lg">
                    è®¡ç®—è´¹ç”¨å¯¹æ¯”
                </button>

                <div id="result"></div>
            </div>

            <!-- ç¾è‚¡å†…å®¹åŒºåŸŸ -->
            <div id="us-content" class="hidden">
                <!-- é€šç”¨è¾“å…¥ -->
                <div class="flex flex-col lg:flex-row gap-4 mb-4">
                    <div class="w-full lg:w-1/2">
                        <label id="usTransactionValueLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">è¾“å…¥äº¤æ˜“å€¼ï¼ˆç¾å…ƒï¼‰</label>
                        <input type="number" id="usTransactionValue" step="0.01" 
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition"
                            placeholder="è¯·è¾“å…¥äº¤æ˜“é‡‘é¢" value="10000">
                    </div>
                    <div class="w-full lg:w-1/2">
                        <label id="usShareCountLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">äº¤æ˜“è‚¡æ•°</label>
                        <input type="number" id="usShareCount" min="1" value="100"
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition"
                            placeholder="è¯·è¾“å…¥äº¤æ˜“è‚¡æ•°">
                    </div>
                </div>
                
                <!-- æ¯æœˆäº¤æ˜“è‚¡æ•°è¾“å…¥ -->
                <div class="w-full mb-6">
                    <label id="usMonthlyShareCountLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">æ¯æœˆäº¤æ˜“è‚¡æ•°</label>
                    <input type="number" id="usMonthlyShareCount" min="0" value="1000"
                        class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition"
                        placeholder="è¯·è¾“å…¥æ¯æœˆäº¤æ˜“è‚¡æ•°">
                </div>

                <!-- äº¤æ˜“æ–¹å‘é€‰æ‹© -->
                <div class="w-full mb-6">
                    <label id="usTransactionDirectionLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">äº¤æ˜“æ–¹å‘</label>
                    <div class="relative">
                        <select id="usTransactionDirectionSelect" 
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 appearance-none bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition">
                            <option value="buy">ä¹°å…¥</option>
                            <option value="sell">å–å‡º</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4 text-gray-700 dark:text-dark-text-secondary">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <!-- å¹³å°è´¹æ¨¡å¼é€‰æ‹© (ç¾è‚¡æŒ‰è‚¡æ•°ï¼Œå¯èƒ½éœ€è¦ç‹¬ç«‹æˆ–è°ƒæ•´ logic) -->
                <div class="w-full mb-6">
                    <label id="usPlatformModeLabel" class="text-sm font-medium text-gray-500 dark:text-dark-text-secondary mb-2 block">å¹³å°è´¹æ¨¡å¼</label>
                    <div class="relative">
                        <select id="usPlatformModeSelect" 
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border border-gray-200 dark:border-gray-700 appearance-none bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:border-broker-primary focus:ring-2 focus:ring-broker-primary/20 transition">
                            <option value="fixed">å›ºå®šå¼</option>
                            <option value="stepped">é˜¶æ¢¯å¼</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4 text-gray-700 dark:text-dark-text-secondary">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <button onclick="calculateFees()" 
                    class="w-full bg-broker-primary text-white px-4 h-12 rounded-full font-medium 
                    hover:bg-broker-primary/90 transition-shadow hover:shadow-lg" id="calculateButton">
                    è®¡ç®—è´¹ç”¨å¯¹æ¯”
                </button>

                <div id="us-result"></div>
            </div>
        </div>
    </div>
    <script src="languages.js"></script>
    <script src="script.js"></script>
    <script>
        // åˆå§‹åŒ–è¯­è¨€å˜é‡
        let currentLang = localStorage.getItem('language') || 'zh-CN';
        let isDarkMode = localStorage.getItem('darkMode') === 'true';
        const themeSwitch = document.getElementById('themeSwitch');
        const langSwitch = document.getElementById('langSwitch');
        
        // æ£€æŸ¥å½“å‰æ—¶é—´æ˜¯å¦åœ¨æ—¥è½åˆ°æ—¥å‡ºä¹‹é—´
        function isNightTime() {
            const now = new Date();
            const hour = now.getHours();
            // å‡è®¾æ—¥è½æ—¶é—´ä¸º18:00ï¼Œæ—¥å‡ºæ—¶é—´ä¸º6:00
            return hour >= 18 || hour < 6;
        }
        
        function updateTheme(dark) {
            isDarkMode = dark;
            // ä¿å­˜ä¸»é¢˜åå¥½åˆ°localStorage
            localStorage.setItem('darkMode', dark);
            
            if (dark) {
                document.documentElement.classList.add('dark');
                themeSwitch.querySelector('span').textContent = languages[currentLang].lightMode;
                // æ›´æ–°æœˆäº®å›¾æ ‡ä¸ºå¤ªé˜³å›¾æ ‡
                themeSwitch.querySelector('svg').innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                `;
            } else {
                document.documentElement.classList.remove('dark');
                themeSwitch.querySelector('span').textContent = languages[currentLang].darkMode;
                // æ›´æ–°å¤ªé˜³å›¾æ ‡ä¸ºæœˆäº®å›¾æ ‡
                themeSwitch.querySelector('svg').innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                `;
            }
        }
        
        function updateLanguage(lang) {
            currentLang = lang;
            // ä¿å­˜è¯­è¨€åå¥½åˆ°localStorage
            localStorage.setItem('language', lang);
            document.documentElement.lang = lang;
            
            // æ›´æ–°æ‰€æœ‰æ–‡æœ¬å†…å®¹
            document.getElementById('pageTitle').textContent = languages[lang].title;
            document.querySelector('#tab-hk span').textContent = languages[lang].hkTab.replace('ğŸ‡­ğŸ‡° ', '');
            document.querySelector('#tab-us span').textContent = languages[lang].usTab.replace('ğŸ‡ºğŸ‡¸ ', '');
            document.getElementById('transactionValueLabel').textContent = languages[lang].transactionValueLabel;
            document.getElementById('transactionValue').placeholder = languages[lang].transactionValuePlaceholder;
            document.getElementById('orderCountLabel').textContent = languages[lang].orderCountLabel;
            document.getElementById('orderCount').placeholder = languages[lang].orderCountPlaceholder;
            document.getElementById('platformModeLabel').textContent = languages[lang].platformModeLabel;
            document.getElementById('usTransactionValueLabel').textContent = languages[lang].usTransactionValueLabel;
            document.getElementById('usTransactionValue').placeholder = languages[lang].usTransactionValuePlaceholder;
            document.getElementById('usShareCountLabel').textContent = languages[lang].usShareCountLabel;
            document.getElementById('usShareCount').placeholder = languages[lang].usShareCountPlaceholder;
            document.getElementById('usPlatformModeLabel').textContent = languages[lang].usPlatformModeLabel;
            document.querySelector('button[onclick="calculateFees()"]').textContent = languages[lang].calculateButton;
            document.getElementById('calculateButton').textContent = languages[lang].calculateButton;
            document.getElementById('usTransactionDirectionLabel').textContent = languages[lang].usTransactionDirectionLabel;
            
            const usMonthlyShareCountLabel = document.getElementById('usMonthlyShareCountLabel');
            usMonthlyShareCountLabel.textContent = languages[lang].usMonthlyShareCountLabel;
            usMonthlyShareCountLabel.placeholder = languages[lang].usMonthlyShareCountPlaceholder;

            const transactionDirectionSelect = document.getElementById('usTransactionDirectionSelect');
            transactionDirectionSelect.options[0].text = languages[lang].buyDirection;
            transactionDirectionSelect.options[1].text = languages[lang].sellDirection;
            // æ›´æ–°é€‰æ‹©æ¡†é€‰é¡¹
            const platformModeSelect = document.getElementById('platformModeSelect');
            platformModeSelect.options[0].text = languages[lang].fixedMode;
            platformModeSelect.options[1].text = languages[lang].steppedMode;
            
            // æ›´æ–°ç¾è‚¡å¹³å°è´¹æ¨¡å¼é€‰æ‹©æ¡†æ–‡æœ¬
            const usPlatformModeSelect = document.getElementById('usPlatformModeSelect');
            usPlatformModeSelect.options[0].text = languages[lang].fixedMode;
            usPlatformModeSelect.options[1].text = languages[lang].steppedMode;
            
            // æ›´æ–°è¯­è¨€åˆ‡æ¢æŒ‰é’®æ–‡æœ¬
            langSwitch.querySelector('span').textContent = lang === 'zh-CN' ? 'English' : 'ä¸­æ–‡';
            
            // æ›´æ–°ä¸»é¢˜æŒ‰é’®æ–‡æœ¬
            themeSwitch.querySelector('span').textContent = isDarkMode ? languages[lang].lightMode : languages[lang].darkMode;
            
            // å¦‚æœå·²ç»è®¡ç®—è¿‡è´¹ç”¨ï¼Œé‡æ–°è®¡ç®—ä»¥æ›´æ–°ç»“æœ
            if (document.getElementById('result').innerHTML) {
                calculateFees();
            }
        }
        
        // æ£€æŸ¥æ—¶é—´å¹¶è®¾ç½®åˆå§‹ä¸»é¢˜ï¼ˆä»…åœ¨é¦–æ¬¡è®¿é—®æ—¶ï¼‰
        if (localStorage.getItem('darkMode') === null) {
            updateTheme(isNightTime());
        } else {
            updateTheme(isDarkMode);
        }
        
        // äº‹ä»¶ç›‘å¬å™¨
        themeSwitch.addEventListener('click', () => {
            updateTheme(!isDarkMode);
        });
        
        langSwitch.addEventListener('click', () => {
            const newLang = currentLang === 'zh-CN' ? 'en-US' : 'zh-CN';
            updateLanguage(newLang);
        });

        // Tab åˆ‡æ¢é€»è¾‘
        const tabHK = document.getElementById('tab-hk');
        const tabUS = document.getElementById('tab-us');
        const hkContent = document.getElementById('hk-content');
        const usContent = document.getElementById('us-content');
        
        tabHK.addEventListener('click', function() {
            tabHK.classList.add('bg-white', 'dark:bg-dark-card', 'shadow', 'text-black', 'dark:text-dark-text');
            tabHK.classList.remove('text-gray-500', 'dark:text-dark-text-secondary', 'bg-transparent');
            tabUS.classList.remove('bg-white', 'dark:bg-dark-card', 'shadow', 'text-black', 'dark:text-dark-text');
            tabUS.classList.add('text-gray-500', 'dark:text-dark-text-secondary', 'bg-transparent');
            hkContent.classList.remove('hidden');
            usContent.classList.add('hidden');
        });
        
        tabUS.addEventListener('click', function() {
            tabUS.classList.add('bg-white', 'dark:bg-dark-card', 'shadow', 'text-black', 'dark:text-dark-text');
            tabUS.classList.remove('text-gray-500', 'dark:text-dark-text-secondary', 'bg-transparent');
            tabHK.classList.remove('bg-white', 'dark:bg-dark-card', 'shadow', 'text-black', 'dark:text-dark-text');
            tabHK.classList.add('text-gray-500', 'dark:text-dark-text-secondary', 'bg-transparent');
            hkContent.classList.add('hidden');
            usContent.classList.remove('hidden');
        });

        // åœ¨é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–è¯­è¨€æ˜¾ç¤ºæ ‡é¢˜
        updateLanguage(currentLang);
    </script>
</body>
</html>